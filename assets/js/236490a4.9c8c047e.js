"use strict";(self.webpackChunkdocs_rancherdesktop_io=self.webpackChunkdocs_rancherdesktop_io||[]).push([[9304],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),m=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=m(n),d=r,g=c["".concat(s,".").concat(d)]||c[d]||u[d]||o;return n?a.createElement(g,i(i({ref:t},p),{},{components:n})):a.createElement(g,i({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var m=2;m<o;m++)i[m]=n[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(7294),r=n(4334),o="tabItem_Ymn6";function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,i),hidden:n},t)}},5488:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(3117),r=n(7294),o=n(4334),i=n(2389),l=n(7392),s=n(7094),m=n(2466),p="tabList__CuJ",u="tabItem_LNqP";function c(e){var t;const{lazy:n,block:i,defaultValue:c,values:d,groupId:g,className:h}=e,f=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=d??f.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),v=(0,l.l)(k,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const y=null===c?c:c??(null==(t=f.find((e=>e.props.default)))?void 0:t.props.value)??f[0].props.value;if(null!==y&&!k.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:b,setTabGroupChoices:T}=(0,s.U)(),[N,w]=(0,r.useState)(y),C=[],{blockElementScrollPositionUntilNextRender:j}=(0,m.o5)();if(null!=g){const e=b[g];null!=e&&e!==N&&k.some((t=>t.value===e))&&w(e)}const O=e=>{const t=e.currentTarget,n=C.indexOf(t),a=k[n].value;a!==N&&(j(t),w(a),null!=g&&T(g,String(a)))},x=e=>{var t;let n=null;switch(e.key){case"Enter":O(e);break;case"ArrowRight":{const t=C.indexOf(e.currentTarget)+1;n=C[t]??C[0];break}case"ArrowLeft":{const t=C.indexOf(e.currentTarget)-1;n=C[t]??C[C.length-1];break}}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",p)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":i},h)},k.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>C.push(e),onKeyDown:x,onClick:O},i,{className:(0,o.Z)("tabs__item",u,null==i?void 0:i.className,{"tabs__item--active":N===t})}),n??t)}))),n?(0,r.cloneElement)(f.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function d(e){const t=(0,i.Z)();return r.createElement(c,(0,a.Z)({key:String(t)},e))}},8531:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return l},metadata:function(){return m},toc:function(){return u}});var a=n(3117),r=(n(7294),n(3905)),o=n(5488),i=n(5162);const l={title:"Transfer Container Images"},s=void 0,m={unversionedId:"how-to-guides/transfer-container-images",id:"how-to-guides/transfer-container-images",title:"Transfer Container Images",description:"Rancher Desktop provides dockerd and containerd as container engine options to manage containers. There are occasions when you might want to transfer the images from one container engine environment to the other. Or you may have migrated to Rancher Desktop from a different container management application and might want to bring the local images from the previous application environment to the Rancher Desktop environment.  This guide provides steps to transfer images using the save and load commands.",source:"@site/docs/how-to-guides/transfer-container-images.md",sourceDirName:"how-to-guides",slug:"/how-to-guides/transfer-container-images",permalink:"/next/how-to-guides/transfer-container-images",draft:!1,editUrl:"https://github.com/rancher-sandbox/docs.rancherdesktop.io/edit/main/docs/how-to-guides/transfer-container-images.md",tags:[],version:"current",frontMatter:{title:"Transfer Container Images"},sidebar:"tutorialSidebar",previous:{title:"Hello World Example",permalink:"/next/how-to-guides/hello-world-example"},next:{title:"Create a Multi-Node Cluster with k3d",permalink:"/next/how-to-guides/create-multi-node-cluster"}},p={},u=[{value:"Steps",id:"steps",level:3}],c={toc:u};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Rancher Desktop provides ",(0,r.kt)("inlineCode",{parentName:"p"},"dockerd")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"containerd")," as container engine options to manage containers. There are occasions when you might want to transfer the images from one container engine environment to the other. Or you may have migrated to Rancher Desktop from a different container management application and might want to bring the local images from the previous application environment to the Rancher Desktop environment.  This guide provides steps to transfer images using the ",(0,r.kt)("inlineCode",{parentName:"p"},"save")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"load")," commands."),(0,r.kt)("h3",{id:"steps"},"Steps"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1. Save image(s) from the source environment to a tar archive.")),(0,r.kt)(o.Z,{groupId:"container-runtime",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"nerdctl",default:!0,mdxType:"TabItem"},(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Save a single image")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"nerdctl save -o local-image.tar image:tag\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Save multiple images")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"nerdctl save -o local-images.tar image1:tag1 image2:tag2\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Save all images in a namespace")),(0,r.kt)("p",null,"Below two commands use ",(0,r.kt)("a",{parentName:"p",href:"https://stedolan.github.io/jq/"},"jq")," for JSON parsing. The long command performs the below steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"nerdctl -n k8s.io image ls")," sub command gets the list of all images present in the ",(0,r.kt)("inlineCode",{parentName:"li"},"k8s.io")," namespace, hence doesn't include images from any other namespace, ",(0,r.kt)("inlineCode",{parentName:"li"},"default")," for instance."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"jq")," sub command filters and formats the images list from the previous step.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},'select(.Repository!=\\"<none>\\")')," part of the command skips those images with repository having a value of ",(0,r.kt)("inlineCode",{parentName:"li"},"<none>"),"."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},'if (.Tag=="<none>") then .Repository else (.Repository+":"+.Tag) end\')')," part of the command formats the name of the images to be just the ",(0,r.kt)("inlineCode",{parentName:"li"},"<Repository>")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"<Repository>:<Tag>")," depending on whether a image tag has a value of ",(0,r.kt)("inlineCode",{parentName:"li"},"<none>")," or not."))),(0,r.kt)("li",{parentName:"ul"},"Finally the ",(0,r.kt)("inlineCode",{parentName:"li"},"nerdctl -n k8s.io save -o all-local-images-in-namespace.tar")," part of the command saves the filtered and formatted images list from the previous two steps into a tar file. ")),(0,r.kt)(o.Z,{groupId:"shell",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"Bash",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'nerdctl -n k8s.io save -o all-local-images-in-namespace.tar $(nerdctl -n k8s.io image ls --format \'{{json .}}\' | jq -r \'select(.Repository!="<none>") | if (.Tag=="<none>") then .Repository else (.Repository+":"+.Tag) end\')\n'))),(0,r.kt)(i.Z,{value:"PowerShell",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'nerdctl -n k8s.io save -o all-local-images-in-namespace.tar $(nerdctl -n k8s.io image ls --format \'{{json .}}\' | jq -r \'select(.Repository!=\\"<none>\\") | if (.Tag==\\"<none>\\") then .Repository else (.Repository+\\":\\"+.Tag) end\')\n'))))),(0,r.kt)(i.Z,{value:"docker",mdxType:"TabItem"},(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Save a single image")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"docker save -o local-image.tar image:tag\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Save multiple images")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"docker save -o local-images.tar image1:tag1 image2:tag2\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Save all local images")),(0,r.kt)("p",null,"Below two commands use ",(0,r.kt)("a",{parentName:"p",href:"https://stedolan.github.io/jq/"},"jq")," for JSON parsing. The long command performs the below steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"docker image ls")," sub command gets the list of all local images."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"jq")," sub command filters and formats the images list from the previous step.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},'select(.Repository!=\\"<none>\\")')," part of the command skips those images with repository having a value of ",(0,r.kt)("inlineCode",{parentName:"li"},"<none>"),"."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},'if (.Tag=="<none>") then .Repository else (.Repository+":"+.Tag) end\')')," part of the command formats the name of the images to be just the ",(0,r.kt)("inlineCode",{parentName:"li"},"<Repository>")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"<Repository>:<Tag>")," depending on whether a image tag has a value of ",(0,r.kt)("inlineCode",{parentName:"li"},"<none>")," or not."))),(0,r.kt)("li",{parentName:"ul"},"Finally the ",(0,r.kt)("inlineCode",{parentName:"li"},"docker save -o all-local-images-in-namespace.tar")," part of the command saves the filtered and formatted images list from the previous two steps into a tar file. ")),(0,r.kt)(o.Z,{groupId:"shell",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"Bash",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'docker save -o all-local-images-in-namespace.tar $(docker image ls --format \'{{json .}}\' | jq -r \'select(.Repository!="<none>") | if (.Tag=="<none>") then .Repository else (.Repository+":"+.Tag) end\')\n'))),(0,r.kt)(i.Z,{value:"PowerShell",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'docker save -o all-local-images-in-namespace.tar $(docker image ls --format \'{{json .}}\' | jq -r \'select(.Repository!=\\"<none>\\") | if (.Tag==\\"<none>\\") then .Repository else (.Repository+\\":\\"+.Tag) end\')\n')))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2. Load images from the saved tar archive in the target environment.")),(0,r.kt)(o.Z,{groupId:"container-runtime",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"nerdctl",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"nerdctl load < local-images.tar\n"))),(0,r.kt)(i.Z,{value:"docker",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"docker load < local-images.tar\n")))))}d.isMDXComponent=!0}}]);